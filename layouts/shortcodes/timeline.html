{{- /*
  Timeline Shortcode

  Displays a vertical or horizontal timeline

  Usage:
    {{< timeline orientation="vertical" >}}
      {{< timeline-item week="Week 1" >}}Small wins - found $20 in an old jacket{{< /timeline-item >}}
      {{< timeline-item week="Week 2" >}}Bigger opportunities - landed two freelance clients{{< /timeline-item >}}
    {{< /timeline >}}

  Or using data parameter (YAML/JSON):
    {{< timeline items='
      - week: "Week 1"
        title: "Small Wins"
        description: "Found $20 in an old jacket"
      - week: "Week 2"
        title: "Bigger Opportunities"
        description: "Landed two freelance clients"
    ' >}}
*/ -}}

{{- $orientation := .Get "orientation" | default "vertical" -}}
{{- $items := slice -}}

{{- if .Get "items" -}}
  {{- $items = .Get "items" | transform.Unmarshal -}}
{{- end -}}

<div class="timeline timeline-{{ $orientation }}">
  {{- if $items -}}
    {{- range $items -}}
      <div class="timeline-item">
        <div class="timeline-marker"></div>
        <div class="timeline-content">
          <strong class="timeline-label">{{ .week | default .label }}</strong>
          {{- with .title -}}<h4>{{ . }}</h4>{{- end -}}
          <p>{{ .description | default .text }}</p>
        </div>
      </div>
    {{- end -}}
  {{- else -}}
    {{- .Inner -}}
  {{- end -}}
</div>

<style>
.timeline {
  position: relative;
  padding: 20px 0;
}

.timeline-vertical {
  border-left: 2px solid #ddd;
  margin-left: 20px;
}

.timeline-item {
  position: relative;
  margin-bottom: 30px;
  padding-left: 30px;
}

.timeline-marker {
  position: absolute;
  left: -21px;
  top: 4px;
  width: 12px;
  height: 12px;
  background: #3FA026;
  border: 3px solid #fff;
  border-radius: 50%;
  box-shadow: 0 0 0 2px #3FA026;
}

.timeline-label {
  color: #3FA026;
  font-weight: 600;
  font-size: 14px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.timeline-content h4 {
  margin: 4px 0 8px 0;
  font-size: 18px;
  color: #333;
}

.timeline-content p {
  margin: 0;
  color: #666;
  line-height: 1.6;
}

/* Horizontal variant */
.timeline-horizontal {
  display: flex;
  gap: 20px;
  overflow-x: auto;
  border-bottom: 2px solid #ddd;
  padding-bottom: 20px;
}

.timeline-horizontal .timeline-item {
  flex: 1;
  min-width: 200px;
  padding-left: 0;
  padding-top: 20px;
}

.timeline-horizontal .timeline-marker {
  left: 50%;
  top: -21px;
  transform: translateX(-50%);
}

@media (max-width: 768px) {
  .timeline-horizontal {
    flex-direction: column;
    border-left: 2px solid #ddd;
    border-bottom: none;
    padding-left: 20px;
  }

  .timeline-horizontal .timeline-item {
    padding-left: 30px;
    padding-top: 0;
  }

  .timeline-horizontal .timeline-marker {
    left: -21px;
    top: 4px;
    transform: none;
  }
}
</style>
